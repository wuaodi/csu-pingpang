<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <text class="title">ğŸ† æ’è¡Œæ¦œ</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨åŒæ­¥è¿œç¨‹æ•°æ®...</text>
  </view>

  <!-- ä¸»è¦å†…å®¹ -->
  <view class="content" wx:if="{{!loading}}">
    <!-- ç»Ÿè®¡ä¿¡æ¯å¡ç‰‡ -->
    <view class="stats-card">
      <view class="stats-item">
        <text class="stats-number">{{totalPlayers}}</text>
        <text class="stats-label">é€‰æ‰‹</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-number">{{totalGames}}</text>
        <text class="stats-label">æ¯”èµ›</text>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <text class="stats-number">â˜ï¸</text>
        <text class="stats-label">è¿œç¨‹åŒæ­¥</text>
      </view>
    </view>

    <!-- èƒœç‡æ’è¡Œæ¦œ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ğŸ… èƒœç‡æ’è¡Œ</text>
        <!-- æ¦œå•ç±»å‹åˆ‡æ¢ -->
        <view class="ranking-tabs">
          <text class="tab-item {{rankingType === 'total' ? 'active' : ''}}" bindtap="switchRankingType" data-type="total">æ€»æ¦œå•</text>
          <text class="tab-item {{rankingType === 'daily' ? 'active' : ''}}" bindtap="switchRankingType" data-type="daily">æ—¥æ¦œå•</text>
        </view>
        <!-- æ—¥æœŸé€‰æ‹©å™¨ -->
        <view class="date-selector" wx:if="{{rankingType === 'daily'}}">
          <picker mode="date" value="{{selectedDate}}" bindchange="onDateChange">
            <view class="date-picker">
              <text class="date-text">ğŸ“… {{selectedDate}}</text>
              <text class="picker-arrow">â–¼</text>
            </view>
          </picker>
        </view>
      </view>
      <view class="ranking-container">
        <view class="ranking-list" wx:if="{{rankings.length > 0}}">
          <view class="ranking-item {{index < 3 ? 'top-three' : ''}}" wx:for="{{rankings}}" wx:key="id" data-rank="{{index + 1}}">
            <view class="rank-badge rank-{{index + 1}}">{{index + 1}}</view>
            <view class="player-info">
              <text class="player-name">{{item.name}}</text>
              <text class="player-stats">{{item.totalGames}}åœº â€¢ {{item.wins}}èƒœ{{item.losses}}è´Ÿ</text>
            </view>
            <view class="win-rate">{{item.winRate}}%</view>
          </view>
        </view>
        <view class="empty-state" wx:else>
          <text class="empty-icon">ğŸ¯</text>
          <text class="empty-text">æš‚æ— æ’è¡Œæ•°æ®</text>
          <text class="empty-hint">è®°å½•æ¯”èµ›åå°†æ˜¾ç¤ºæ’è¡Œæ¦œ</text>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
    <view class="middle-actions">
      <button class="action-btn refresh-btn" bindtap="manualRefresh">
        <text class="btn-icon">ğŸ”„</text>
        <text class="btn-text">æ‰‹åŠ¨åˆ·æ–°</text>
      </button>
      <button class="action-btn export-btn" bindtap="exportData">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">å¯¼å‡ºæ•°æ®</text>
      </button>
    </view>

    <!-- æ¯”èµ›è®°å½• -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">ğŸ“‹ æ¯”èµ›è®°å½•</text>
        <view class="record-date-info" wx:if="{{rankingType === 'daily'}}">
          <text class="date-info">{{selectedDate}} çš„æ¯”èµ›</text>
        </view>
        <view class="record-date-info" wx:else>
          <text class="date-info">ä»Šæ—¥æ¯”èµ›</text>
        </view>
      </view>
      <view class="history-container">
        <view class="history-list" wx:if="{{gameHistory.length > 0}}">
          <view wx:for="{{gameHistory}}" wx:key="id">
            <!-- æ¯”èµ›è®°å½• -->
            <view class="history-item">
              <view class="match-players">
                <text class="player-name">{{item.player1.name}}</text>
                <view class="match-score">
                  <text class="score">{{item.player1.score}}</text>
                  <text class="vs">:</text>
                  <text class="score">{{item.player2.score}}</text>
                </view>
                <text class="player-name">{{item.player2.name}}</text>
              </view>
              <view class="match-info">
                <text class="match-result" wx:if="{{!item.isDraw}}">{{item.winner}} èƒœ</text>
                <text class="match-result draw" wx:else>å¹³å±€</text>
                <text class="match-time">{{item.formattedTime}}</text>
              </view>
            </view>
          </view>
        </view>
        <view class="empty-state" wx:else>
          <text class="empty-icon">ğŸ“…</text>
          <text class="empty-text" wx:if="{{rankingType === 'daily'}}">{{selectedDate}} æš‚æ— æ¯”èµ›è®°å½•</text>
          <text class="empty-text" wx:else>ä»Šæ—¥æš‚æ— æ¯”èµ›è®°å½•</text>
          <text class="empty-hint" wx:if="{{rankingType === 'daily'}}">è¯¥æ—¥æœŸæ²¡æœ‰è¿›è¡Œä»»ä½•æ¯”èµ›</text>
          <text class="empty-hint" wx:else>è®°å½•æ¯”èµ›åå°†åœ¨è¿™é‡Œæ˜¾ç¤º</text>
        </view>
      </view>
    </view>


  </view>
</view> 