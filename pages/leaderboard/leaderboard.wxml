<view class="container">
  <view class="header">
    <text class="title">ğŸ† æ’è¡Œæ¦œ</text>
  </view>

  <!-- åˆ‡æ¢æ ‡ç­¾ -->
  <view class="tabs">
    <view class="tab {{currentTab === 'ranking' ? 'active' : ''}}" bindtap="switchTab" data-tab="ranking">
      <text>èƒœç‡æ’è¡Œ</text>
    </view>
    <view class="tab {{currentTab === 'history' ? 'active' : ''}}" bindtap="switchTab" data-tab="history">
      <text>æ¯”èµ›è®°å½•</text>
    </view>
  </view>

  <!-- èƒœç‡æ’è¡Œæ¦œ -->
  <view class="ranking-section" wx:if="{{currentTab === 'ranking'}}">
    <view class="ranking-list">
      <view class="ranking-item {{item._openid === userOpenid ? 'highlight' : ''}}" 
            wx:for="{{userRankings}}" wx:key="_id">
        <view class="rank-badge rank-{{index + 1}}">
          <text class="rank-number">{{index + 1}}</text>
        </view>
        <image class="user-avatar" src="{{item.avatarUrl}}" mode="aspectFill"></image>
        <view class="user-info">
          <text class="user-name">{{item.nickName}}</text>
          <view class="user-stats">
            <text class="stat-item">{{item.totalGames || 0}}åœº</text>
            <text class="stat-item">{{item.wins || 0}}èƒœ</text>
            <text class="stat-item">{{item.losses || 0}}è´Ÿ</text>
          </view>
        </view>
        <view class="win-rate">
          <text class="rate-number">{{item.winRate}}%</text>
          <text class="rate-label">èƒœç‡</text>
        </view>
      </view>
    </view>
    
    <view class="empty-state" wx:if="{{userRankings.length === 0}}">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">æš‚æ— æ’è¡Œæ•°æ®</text>
    </view>
  </view>

  <!-- æ¯”èµ›è®°å½• -->
  <view class="history-section" wx:if="{{currentTab === 'history'}}">
    <view class="history-list">
      <view class="history-item" wx:for="{{gameHistory}}" wx:key="_id">
        <view class="game-header">
          <text class="game-time">{{item.timeText}}</text>
          <view class="game-result {{item.isCurrentUserWin ? 'win' : 'lose'}}">
            <text>{{item.isCurrentUserWin ? 'èƒœåˆ©' : 'å¤±è´¥'}}</text>
          </view>
        </view>
        
        <view class="game-players">
          <view class="player">
            <image class="player-avatar" src="{{item.player1.avatarUrl}}" mode="aspectFill"></image>
            <text class="player-name">{{item.player1.nickName}}</text>
            <text class="player-score">{{item.player1.score}}</text>
          </view>
          
          <view class="vs-divider">
            <text>VS</text>
          </view>
          
          <view class="player">
            <image class="player-avatar" src="{{item.player2.avatarUrl}}" mode="aspectFill"></image>
            <text class="player-name">{{item.player2.nickName}}</text>
            <text class="player-score">{{item.player2.score}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="empty-state" wx:if="{{gameHistory.length === 0}}">
      <text class="empty-icon">ğŸ®</text>
      <text class="empty-text">æš‚æ— æ¯”èµ›è®°å½•</text>
    </view>
  </view>

  <!-- åˆ·æ–°æŒ‰é’® -->
  <view class="refresh-btn" bindtap="refreshData">
    <text>ğŸ”„ åˆ·æ–°æ•°æ®</text>
  </view>
</view> 